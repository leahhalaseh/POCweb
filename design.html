<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Lone Worker PoC">
    <meta name="author" content="Bagus Maulana, Leah Halaseh, Iacovos Pantekhis">
    <title>Lone Worker PoC</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link href="css/animate.min.css" rel="stylesheet"> 
    <link href="css/lightbox.css" rel="stylesheet"> 
	<link href="css/main.css" rel="stylesheet">
	<link href="css/responsive.css" rel="stylesheet">

    <!--[if lt IE 9]>
	    <script src="js/html5shiv.js"></script>
	    <script src="js/respond.min.js"></script>
    <![endif]-->       
    <link rel="shortcut icon" href="images/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="images/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="images/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="images/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="images/ico/apple-touch-icon-57-precomposed.png">
</head><!--/head-->

<body>

	<header id="header">      
        <div class="navbar navbar-fixed-top" role="banner">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>

                    <a class="navbar-left" href="index.html">
                    	<h1>Lone Worker PoC</h1>
                    </a>
                    
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="index.html">Home</a></li>
                        <li class="dropdown"><a href="#">Overview <i class="fa fa-angle-down"></i></a>
                            <ul role="menu" class="sub-menu">
                                <li><a href="background.html">Background</a></li>
                                <li><a href="requirements.html">Requirements</a></li>
                                <li><a href="video.html">Video</a></li>
                                <li><a href="manual.html">User and System Manual</a></li>
                            </ul>
                        </li>                    
                        <li class="dropdown"><a href="research.html">Research </a></li>
                        <li class="dropdown"><a href="#">Development <i class="fa fa-angle-down"></i></a>
                            <ul role="menu" class="sub-menu">
                                <li><a href="prototypes.html">Prototypes</a></li>
                                <li><a class="active" href="design.html">Technical Design</a></li>
                                <li><a href="testing.html">Testing and Evaluation</a></li>
                                <li><a href="repos.html">Repositories and Further Development</a></li>
                            </ul>
                        </li>
                        <li class="dropdown"><a href="#">Management <i class="fa fa-angle-down"></i></a>
                            <ul role="menu" class="sub-menu">
                                <li><a href="meetings.html">Meetings</a></li>
                                <li><a href="biweekly.html">Bi-Weekly Reports</a></li>
                                <li><a href="team.html">Team Management</a></li>
                            </ul>
                        </li>                         
                        <li><a href="feedback.html">Feedback</a></li>                    
                    </ul>
                </div>
            </div>
        </div>
    </header>
    <!--/#header-->

    <section id="page-breadcrumb">
        <div class="vertical-center sun">
             <div class="container">
                <div class="row">
                    <div class="action">
                        <div class="col-sm-12">
                            <h1 class="title">Technical Design</h1>
                        </div>
                     </div>
                </div>
            </div>
        </div>
   </section>
    <!--/#page-breadcrumb-->

    <section id="about-company" class="padding-top wow fadeInUp" data-wow-duration="400ms" data-wow-delay="400ms">
        <div class="container">
            <div class="row margin-bottom">
                <div class="col-sm-12 text-center">
                    <img src="images/code.png" width="256" class="margin-bottom" alt="">

                    <h1>Architectural Diagram</h1>
                    <div class="row padbot-slight">
                        <div class="col-md-6">
                            <h4>Below is a diagram that shows the components of the system and how they are connected with each other:</h4>
                            <img src="images/diagram.png" alt="">
                        </div>
                        <div class="col-md-6">
                            <h4>Description of each component, along with interactions with each other:</h4>
                            <ul class="list-fix-align">
                                <li>Mobile application: The core of our system, the mobile application is divided into three pages:</li>
                                <li class="nested-list">Dashboard: The main page of the app, this page shows the sensor data polled from the Microsoft Band when the user is working, and also allows the user to send this data to the server with the Check In and Panic buttons</li>
                                <li class="nested-list">Notifications: Displays previous messages received from the web dashboard via the server, and allows the user to reply by sending a text message to the server, which will be passed to the web dashboard</li>
                                <li class="nested-list">Profile: Shows the user's data such as the user's name, which can be edited. This user data is sent to the server when the user sends a message to the server.</li>

                                <li><br/></li>
                                <li>Microsoft Band: The Microsoft Band is used to read the user's vitals data such as heart rate and skin temperature using its in-built sensors. The mobile application requests the sensor data every minute while the user is working.</li>
                                <li><br/></li>
                                <li>Web Server: Built using Node.js and Heroku, the server handles HTTP requests from the mobile app and the web dashboard, stores messages sent by the mobile app to be displayed by the web dashboard, and stores the last broadcasted message by the dashboard to be sent to active instances of the mobile application</li>
                                <li><br/></li>
                                <li>Web Dashboard: The dashboard, meant to be used by the Head Office, displays messages sent by the mobile application through the server, as well as allowing the Head Office to broadcast a message to every user (sent through the server).</li>
                            </ul>
                        </div>
                    </div>

                    <h1 class="padbot-slight">Technical Achievements and Implementation Details</h1>
                    <h4>Over the course of our project, we have managed to achieve the following:</h4>
                    <div class="list-fix-align padbot-slight">
                        <ul>
                            <li>Connect the mobile application with the Microsoft Band, using the Band SDK</li>
                            <li>Poll sensor data from the Microsoft Band automatically every minute while the user is working</li>
                            <li>Use the phone's built in timer to record time elapsed, as well as automate polling sensor data from the Band</li>
                            <li>Determine the user's location, using the phone's built in GPS sensors</li>
                            <li>Save the user's profile (name, e-mail, etc.) in the phone's local storage settings</li>
                            <li>Send a HTTP POST request to the server, containing the sensor data, from the mobile app, to send a message to the web dashboard through the server</li>
                            <li>Send a HTTP GET request automatically every minute, using the phone's built in timer, to check if there is any new notification from the web dashboard</li>
                            <li>Receive and read the HTTP response for said request, and display the message from the web dashboard as a phone notification, and also send the notification to the Band which displays it as a Band notification</li>
                            <li>Serialise and store the previously received notifications on the phone's local storage, and display a list of previously received messages on the mobile app, along with the ability to clear the previously stored notifications</li>
                            <li>Create a working three-page navigation system on the mobile app</li>
                            <li>Display a list of messages sent by the mobile app, sorted by time received by the server, on the web dashboard</li>
                            <li>Allow the web dashboard to send a broadcast notification that is sent through the server to all active instances of the mobile application, which receives the notification using an automated HTTP GET request</li>
                        </ul>
                    </div>

                    <h4>To implement our system, we used the following services, packages, and extensions:</h4>
                    <div class="list-fix-align padbot-slight">
                        <ul>
                            <li>Microsoft Band SDK - .NET package that we used for the mobile app to communicate with the band e.g. poll sensors, send notifications</li>
                            <li>Json.NET - .NET package that we used to serialise C# objects to a JSON format to be saved and loaded locally as a string</li>
                            <li>Microsoft HTTP Client Libraries - .NET package that we used to send HTTP requests to the server from the mobile app.</li>
                            <li>Heroku - Web service that we used for our web server and web dashboard</li>
                            <li>Node.js - Javascript runtime environment for server-side Web applications, used on the web server.</li>
                            <li>Express - A Node.js extension used in the web dashboard and web server</li>
                            <li>BodyParser - A Node.js extension used to read the body of incoming HTTP requests to the web server</li>
                        </ul>
                    </div>

                    <h1 class="padbot-slight">Design Patterns</h1>
                    <h4>Below are the design patterns that we used in our system:</h4>
                    <div class="list-fix-align padbot-slight">
                        <ul>
                            <li>Singleton/State: We used the Singleton and State design pattern for the BandManager class, which handles communication between the mobile app with the Microsoft Band. When the app is initialised, the main page initialises a public, static instance of BandManager which is then accessed by other classes. This allows us to store the state of the connection in a single instance which can be read and written and changes are immediately visible by all accessors.</li>
                            <li>Front Controller: Our system is built on a centralised web service that handles all requests, both coming from the mobile application and the web dashboard. This ensures that in the future, if additional apps are built on the system (for instance, an iOS or Android port of the mobile app), it all connects together to the same server and can be accessed through one web dashboard.</li>
                            <li>Module: We grouped together similar methods with similar functions and dependencies into a container class as static methods. One such example is the HttpManager class that handles HTTP GET and POST requests from the mobile app to the web server.</li>
                            <li>Task-based Asynchronous Pattern: We used asynchronous methods to have greater control over the sequence in which our app runs code and avoid unwanted interferences e.g. two different threads trying to poll sensors from the Microsoft Band at the same time. This design pattern is built in to C# using the async, await, and Task keywords.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--/#about-company-->   

    <footer id="footer">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 text-center bottom-separator">
                    <img src="images/home/under.png" class="img-responsive inline" alt="">
                </div>
                <div class="col-sm-12">
                    <div class="copyright-text text-center">
                        <p>&copy; Leah Halaseh, Bagus Maulana, Iacovos Pantekhis, 2015. All Rights Reserved.</p>
                        <p>Designed by <a target="_blank" href="http://www.themeum.com">Themeum</a></p>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!--/#footer-->

    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/lightbox.min.js"></script>
    <script type="text/javascript" src="js/wow.min.js"></script>
    <script type="text/javascript" src="js/main.js"></script>   
</body>
</html>
